---
layout: guide
guideName: How to re-install the operating system
---

<div class="container">
  <p>
    <span
      >Note: It is very unlikely that this is necessary. Before going through
      this step, make sure to use the built-in device wipe mechanism.</span
    >
  </p>
  <p><span></span></p>
  <p>
    <span
      >By default the Raspberry Pi Compute Module 4 has a fixed boot order which
      tries to boot from the internal eMMC before booting from a USB mass
      storage device. In rare cases it can be that the internal eMMC is deemed
      bootable, but does not boot into a working system. In this case, there are
      two options you can try to reinstall Home Assistant OS.</span
    >
  </p>
  
  <p><span></span></p>
  <p>
    <span><h2>Option 1 (recommended): Reinstall Home Assistant OS using Red + Blue button</h2></span>
  </p>
  <p><span></span></p>
  <ol start="1">
    <li>
      <span>Remove power from your system</span>
    </li>
    <li>
      <span>Power up the system</span>
    </li>
    <li>
      <span
        >Within 5s (or from start), press and hold the red and blue button on
        the backside of the device simultaneously.</span
      >
    </li>
    <li>
      <span>Hold the two buttons until only the red LED is lit.</span>
    </li>
    <li>
      <span>Remove power from your system</span>
    </li>
    <li>
      <span
        >Follow the instructions to <a href="/power-supply#installing-home-assistant-software-on-kit">
          install Home Assistant OS</a> using the Home
          Assistant OS Installer from a USB flash drive.</span
      >
    </li>
  </ol>
  <p><span></span></p>
  <p>
    <span><h2>Option 2: Reinstall Home Assistant OS using rpiboot</h2></span>
  </p>
  <ol start="1">
    <li>
      <span>Install rpiboot onto your computer.</span>
    </li>
    <ul>
      <li>
        <span
          >Using Windows Installer
          <a
            href="https://github.com/raspberrypi/usbboot/raw/master/win32/rpiboot_setup.exe"
            >here</a
          ></span
        >
      </li>
      <li>
        <span
          >From source code
          <a
            href="https://www.raspberrypi.com/documentation/computers/compute-module.html#building-rpiboot-on-your-host-system-cygwinlinux"
            >here</a
          ></span
        >
      </li>
    </ul>
  </ol>
  <ol start="2">
    <li>
      <span>Open Home Assistant Yellow enclosure to access jumpers on the PCB.</span>
    </li>
    <li><span>Set JP1 to USB.</span></li>
    <li>
      <span>Bridge JP2 (USB-C Rcvry).</span>
    </li>
    <li>
      <span
        >Plug-in a USB-C cable to Home Assistant Yellow and connect it to your
        PC.</span
      >
    </li>
    <li>
      <span
        >Power up the board. Only the red LED should be on at this point (solid, not blinking).</span
      >
    </li>
    <li><span>Run rpiboot on your PC and let it run through. Afterwards, the green LED should be on.</span></li>
    <li>
      <span
        >Run Raspberry Pi Imager and flash the <b>Home Assistant OS Installer for Yellow</b> onto
        the eMMC ("RPi-MSD"). Refer to 
        <a href="https://yellow.home-assistant.io/power-supply/#installing-the-raspberry-pi-imager">
          Step 1 through 5</a> from the <b>Installing Home Assistant Software on Kit</b> procedure for the exact steps.
        Windows might bring up an message asking to insert a disk, this message can be closed. The
        Raspberry Pi Imager prompt to remove the SD card can be ignored as well. Press Continue and
        close the Raspberry Pi Installer.
      </span>
    </li>
    <li>
      <span>Remove power from the board.</span>
    </li>
    <li><span>Un-bridge JP2.</span></li>
    <li><span>Set JP1 to UART</span></li>
    <li><span>Follow the instructions </span
      ><span
        ><a
          href="https://yellow.home-assistant.io/power-supply/#connecting-the-ethernet-cable"
          >here</a
        ></span
      ><span
        >. Note that because the installer is now installed to the eMMC, no USB
        flash drive is required.</span></li>
  </ol>
  <p><span>Resources:</span></p>
  <p>
    <span
      ><a
        href="https://www.raspberrypi.com/documentation/computers/compute-module.html#steps-to-flash-the-emmc"
        >Raspberry Pi Steps to Flash eMMC</a
      ></span
    >
  </p>
</div>
